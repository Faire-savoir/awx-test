---
- name: Update container
  hosts: all
  ignore_unreachable: yes
  gather_facts: false
  become: yes

  collections:
    - kubernetes.core
  
  tasks:
  - name: Delete All pod from namespace
    ansible.builtin.command: kubectl delete --all pods -n {{ item }}
    loop: "{{ ns_list }}"
    ignore_errors: yes
    ignore_unreachable: yes
    async: 120
    poll: 0

#- name: Delete the POD
#  k8s:
#    api_version: v1
#    kind: Pod
#    namespace: "{{ k8s_namespace }}"
#    name: "{{ pod_name }}"
#    state: absent